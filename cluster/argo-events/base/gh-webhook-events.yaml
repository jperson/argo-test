# apiVersion: argoproj.io/v1alpha1
# kind: EventSource
# metadata:
#   name: github
# spec:
#   service:
#     ports:
#     - port: 3737
#       targetPort: 3737
#   github:
#     argo-test:
#       owner: jperson
#       repository: argo-test
#       webhook:
#         endpoint: /webhook
#         port: "3737"
#         method: POST
#         url: https://17f4-71-231-232-21.ngrok.io
#       events:
#         - "*"
#       apiToken:
#         name: gh-webhook
#         key: token
#       insecure: true
#       active: true
#       contentType: json
# ---
#apiVersion: networking.k8s.io/v1
#kind: Ingress
#metadata:
#  name: github
#  annotations:
#    kubernetes.io/ingress.class: "nginx"
#    ingress.kubernetes.io/ssl-redirect: "false"
#    nginx.ingress.kubernetes.io/ssl-redirect: "false"
#spec:
#  rules:
# #host: e8ef-71-231-232-21.ngrok.io
#  - host: github.webhook
#    http:
#      paths:
#      - path: /webhook
#        pathType: Prefix
#        backend:
#          service:
#           name: github-eventsource-svc
#           port:
#             number: 3737
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: example-ingress
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /$1
spec:
  rules:
    - host: hello-world.info
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: web
                port:
                  number: 8080
